<div class="w-full mb-10 flex items-center flex-no-wrap justify-between">
	<h3 lang langLabel="referencia-financiera:titulo" class="font-bold m-0 display-block w-full m-0">Referencias
		financieras</h3>

	<button (click)="ObtenerTodo()" nz-button nzType="text" nz-tooltip [nzTooltipTitle]="titleTemplate">
		<i nz-icon nzType="reload" nzTheme="outline"></i>
	</button>
	<ng-template #titleTemplate>
		<span lang langLabel="vs-tooltip:recargar">
			Volver a cargar
		</span>
	</ng-template>
</div>

<form nz-form [formGroup]="form" class="w-full grid gap-15">


	<div class="grid-col-6">
		<p lang langLabel="referencia-financiera:tipo-institucion" class="label">Tipo de institución Financiera:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<vs-select-tipo-institucion-financiera
					class="w-full"
					formControlName="codigoTipoInstitucionFinanciera"></vs-select-tipo-institucion-financiera>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-6">
		<p lang langLabel="referencia-financiera:institucion" class="label">Institución Financiera:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<vs-select-institucion-financiera
					[codigoTipoFinanciero]="form.get('codigoTipoInstitucionFinanciera')!.value"
					formControlName="codigoInstitucionFinanciera"></vs-select-institucion-financiera>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-3">
		<p lang langLabel="referencia-financiera:tipo-cuenta" class="label">Tipo de Cuenta Financiera:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<vs-select-tipo-cuenta-finan
					class="w-full"
					formControlName="codigoTipoCuentaFinanciera"></vs-select-tipo-cuenta-finan>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-3">
		<p lang langLabel="referencia-financiera:numero-cuenta" class="label">Número de Cuenta:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<input nz-input id="txtNumeroCuenta" Width="70px" class="configuracionControles"
					   formControlName="numeroCuenta">
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-2">
		<p lang langLabel="referencia-financiera:fecha-apertura" class="label">Fecha de apertura</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<nz-date-picker [nzDisabledDate]="disabledDate"
								[nzFormat]="dateFormat" class="w-full" formControlName="fechaCuenta"></nz-date-picker>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-2">
		<p lang langLabel="referencia-financiera:cifras" class="label">Cifras:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<input nz-input Width="50px" class="configuracionControles" formControlName="cifras">
			</nz-form-control>
		</nz-form-item>
	</div>


	<div class="grid-col-2">
		<p lang langLabel="referencia-financiera:disponible" class="label">Saldo disponible:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<!--				<input nz-input Width="50px" class="configuracionControles" formControlName="saldo">-->
				<nz-input-number decimalSeparator
								 class="w-full"
								 [nzMin]="0"
								 formControlName="saldo"
								 [nzFormatter]="formatterDollar"
								 [nzParser]="parserDollar"
				></nz-input-number>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-2">
		<p lang langLabel="referencia-financiera:saldo-obligacion" class="label">Obligacion Total:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<!--				<input nz-input Width="50px" class="configuracionControles" formControlName="saldoObligacion">-->
				<nz-input-number decimalSeparator
								 class="w-full"
								 [nzMin]="0"
								 formControlName="saldoObligacion"
								 [nzFormatter]="formatterDollar"
								 [nzParser]="parserDollar"
				></nz-input-number>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-2">
		<p lang langLabel="referencia-financiera:obligacion-mensual" class="label">Monto Obligacion:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<!--				<input nz-input Width="50px" class="configuracionControles" formControlName="obligacionMensual">-->
				<nz-input-number decimalSeparator
								 class="w-full"
								 [nzMin]="0"
								 formControlName="obligacionMensual"
								 [nzFormatter]="formatterDollar"
								 [nzParser]="parserDollar"
				></nz-input-number>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-6">
		<p lang langLabel="referencia-financiera:observaciones" class="label">Observaciones:</p>
		<nz-form-item>
			<nz-form-control nzHasFeedback nzErrorTip="El campo es requerido">
				<textarea nz-input formControlName="observaciones"></textarea>
			</nz-form-control>
		</nz-form-item>
	</div>

	<div class="grid-col-2">
		<p class="label" style="opacity: 0;">.</p>
		<div class="flex items-center flex-no-wrap w-full">
			<button nz-button class="w-full" nzType="primary" (click)="IngresarFila()">
				<div lang langLabel="referencia-financiera:insertar-referencia-financiera"
					 *ngIf="_accion === 'Insertar'; else elseBlock">Insertar
				</div>
				<ng-template #elseBlock>
					<div lang langLabel="referencia-financiera:actualizar-referencia-financiera">
						Actualizar
					</div>
				</ng-template>
			</button>
			<button *ngIf="_accion !== 'Insertar'"
					(click)="ResetearVista()"
					nz-tooltip nzTooltipTitle="Nuevo registro"
					nz-button style="width: 4rem;" class="ml-7"><i nz-icon nzType="plus" nzTheme="outline"></i></button>
		</div>
	</div>
</form>


<div class="w-full pt-30">
	<vs-table [showPagination]="false" [data]="listaReferenciaFinanciera" [loading]="cargando.listar">
		<thead>
		<tr>
			<th lang langLabel="referencia-financiera:institucion">Institución Financiera</th>
			<th lang langLabel="referencia-financiera:numero-cuenta">Número de Cuenta</th>
			<!--			<th lang langLabel="referencia-financiera:cifras">Cifras</th>-->
			<th lang langLabel="referencia-financiera:disponible">Saldo disponible</th>
			<th lang langLabel="referencia-financiera:obligacion-mensual">Monto obligación</th>
			<th lang langLabel="referencia-financiera:saldo-obligacion">Obligación total</th>
			<!--			<th lang langLabel="referencia-financiera:observaciones">Observaciones</th>-->
			<th class="min-size"></th>
		</tr>
		</thead>
		<tbody>
		<ng-container *ngFor="let data of listaReferenciaFinanciera; let i = index">
			<ng-container *ngIf="data.accion != accionesHtml.Eliminar">
				<tr>
					<td>{{ ObtenerNombreInstitucionFinancieraPorCodigo(data.objeto.codigoInstitucionFinanciera) }}</td>
					<td>{{data.objeto.numeroCuenta}}</td>
					<!--					<td>{{data.objeto.cifras}}</td>-->
					<td>{{data.objeto.saldo | currency}}</td>
					<td>{{data.objeto.obligacionMensual | currency}}</td>
					<td>{{data.objeto.saldoObligacion | currency}}</td>
					<!--					<td>{{data.objeto.observaciones}}</td>-->
					<td>
						<div class="flex items-center flex-no-wrap">
							<button nz-tooltip [nzTooltipTitle]="titleEditar" nz-button nzType="text" class="mr-7"
									(click)="EditarFila(data,i)">
								<i nz-icon nzType="edit" nzTheme="outline"></i>
							</button>

							<button
								nz-popconfirm
								[nzPopconfirmTitle]="titleConfirmarEliminar"
								(nzOnConfirm)="EliminarFila(i)"
								nz-tooltip [nzTooltipTitle]="titleEliminar" nz-button nzType="text"
								class="text-red-600 hover:text-red-800">
								<i nz-icon nzType="delete" nzTheme="outline"></i>
							</button>
							<ng-template #titleEditar>
								<span lang langLabel="vs-tooltip:editar">Editar</span>
							</ng-template>
							<ng-template #titleEliminar>
								<span lang langLabel="vs-tooltip:eliminar">Eliminar</span>
							</ng-template>
							<ng-template #titleConfirmarEliminar>
								<span lang langLabel="vs-tooltip:confirmar-eliminar">Eliminar</span>
							</ng-template>
						</div>
					</td>
				</tr>
			</ng-container>
		</ng-container>
		</tbody>
	</vs-table>
</div>

<!--<div class="w-full pt-20 text-right" *ngIf="mostrarGuardar">-->
<!--	<button nz-button nzType="primary" [nzLoading]="cargando.guardar" class="vs-btn-green" (click)="GuardarBase()">-->
<!--		Guardar cambios-->
<!--	</button>-->
<!--</div>-->
